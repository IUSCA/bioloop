sequenceDiagram
    rect rgb(191, 223, 255)
    UIClient->>APIServer: initiate upload and request token
    APIServer->>Postgres: check if user is authorized to upload
    Postgres->>APIServer: persisted metadata about the upload
    APIServer->>SignetOAuth: request token with client-credentials flow + upload scope
    SignetOAuth->>APIServer: receive requested token
    APIServer->>UIClient: send auth token
    UIClient->>SecureUploadAPI: upload (can retry) chunks of all files with auth token
    SecureUploadAPI->>UIClient: acks chunk upload by validating checksum
    UIClient->>APIServer: updates after all file chunks are uploaded
    APIServer->>Worker: trigger worker to initiate processing of the upload
    Worker->>APIServer: update upload status
    end

[![](https://mermaid.live/edit#pako:eNp9U01v2zAM_SuETi3qFY3dNLEOBYr10sO2AkExoMhFkWlHiC15-kiWBvnvo604SIJgPtiWSD4-PpI7Jk2BjDOHfwJqia9KVFY0cw30WJQebLW4GeWjBNI0o9d4fBuNH2_fa4Xaf3t-fnl_m6Fdo-WgtPJKeITQ1kYUIHRBMITtPHizQh2DjxEU_W6cryw6DnKJcgWqhODQgnIggl8aq76woOADZAQYgs6zt2idcp7cG_SiEF6AWJhAqZd4Fn6af6Yqjf7XC-Xi51xho_wSZCxTWizoq0TtoKzNBu6GGp00LUbcE6xzZiQlqjUO-H1BV9UYZOXgkLTrFDh1PVF9hjJY_Og5EAIf6NxIoSmPt9tbUjTolQNTgqhrKFWNLhZ1iXsBdkZESILokYYUiy2sRa1IYKWr2DYXmv_NRWjJmZKL0lNrBzIDP2GH9uCVBv02dtVheKuqiqI3_bmbiOO0tdZIdK5jQ7VedjsCXCN0bKEXPrjoTbKzhDVoG6EKWo1ddz1nBNrgnHH6LbAUofZzlkTTsDyddRdB6HJpNrOD4WdoFjSand3b0M_Kfq73lIb6YGZbLRnvDAmLtA5bOFxiobyxP-Km9gubsFboT2OOLnRkfMf-Mp6l91n2kKeP-XQyydN8krAt49On-_Eof5hkj9OnLJ2O0n3Cvvr40f4f51Zcrw)
